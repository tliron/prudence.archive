//
// Prudence Routing
//

import java.io.File

// Hosts

executeOrDefault('instance/hosts/')

// Applications

applications = []
component.context.attributes['applications'] = applications
applicationDirs = new File('applications').listFiles()
for(applicationDir in applicationDirs) {
	if(applicationDir.isDirectory()) {
		applicationName = applicationDir.name
		applicationInternalName = applicationDir.name
		applicationLoggerName = applicationDir.name
		applicationBasePath = applicationDir.path
		applicationDefaultURL = '/' + applicationDir.name + '/'
		executeOrDefault(applicationBasePath, 'defaults/application')
		applications.add(prudenceApplication)
	}
}

if(applications.size() == 0) {
	println('No applications found. Exiting.')
	System.exit(0)
}

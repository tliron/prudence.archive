<% document.cacheDuration = 5000; %><%& 'header-fragment' %>

<h2>Tutorial</h2>

THIS IS A WORK IN PROGRESS!

<h3>Download Your Flavor</h3>

TODO

<h3>How to Run Prudence</h3>

<p>
Open a terminal, and make sure your system supports at least Java 5. "java -version" should do the trick.
</p>
<p>
If it does, you're ready to go. On Unix-like operating systems (including Linux and Mac OS), just run the run.sh script.
On Windows, run run.bat. You should get the "main.script finished" message. That's it! The Prudence server should now be running
on your system.
</p>
<p>
Now, point your web browser to http://localhost:8080, and you should see the Prudence demo application.
</p>
<p>
You can monitor Prudence via the logs in the /log folder.
</p>
<p>
prudence.log will contain all outputs from your application and other parts of the Prudence framework, including errors and warnings. 
</p>
<p>
web.log is an Apache-compatible log of all hits to your Prudence server. You can analyze it.
</p>


<h3>Writing a Resource</h3>

<p>
Resources are all under the /resources folder. Changes here will be picked up by Prudence on-the-fly.
</p>
<p>
They are source code files with extensions appropriate for your language, one file per resource. Code can, of course, include other files and libraries.
</p>
<p>
The directory structure maps directly to the final URL of your resource relative to the /resource/ URL.
For example, the file /resources/shopping-cart/item.js would be mapped to http://localhost:8080/resource/shopping-cart/item.
Note that you do not have to use the file extension for the mapped URL: Prudence will pick up the first file with the given name. This means that you need
to be careful using files with the same name and different extensions.
</p>
<p>
If you prefer, you can use directories exclusively for URL mapping: files named default will be considered as the default mapping
for any directory if no file is specified in the URL. For example, the file /resources/user/profile/details/default.js would be mapped to
http://localhost:8080/resource/user/profile/details.
</p>
<p>
More advanced routing is possible by editing your main script. See below.
</p>
<p>
Your resource script must have at least a handleInit function, which is called only once, when the resource is attached to the URL.
handleInit is where you should set the representational capabilities of your resource: what MIME type it supports, character encodings, languages, etc.
The Prudence server will automatically negotiate with the client for the best format using HTTP headers. 
</p>
<p>
To handle each HTTP verb, use handleGet, handlePut, handlePost and handleDelete. You can handle any or all of them.
Within each handler, you get access to information about the final format negotiated with the client.
Additionally, you can access whatever client sent you in the HTTP request: the URL query, cookies, posted data,
and HTTP header information.
</p>
<p>
Your verb handlers can return a representation of your resource. It's up to you to construct the representation in the proper format.
By default, Prudence will expect you to return textual formats, such as JSON, XML, plain text, etc.
This may suffice for many applications. However, Prudence also gives you access to advanced representation tools,
including streaming formats, via the Restlet library. See below.
</p>

<h3>Dynamically Generating HTML</h3>

<p>
Dynamic HTML documents are all under the /web folder. Changes here will be picked up by Prudence on-the-fly.
</p>
<p>
The /web/static sub-folder is reserved for non-dynamic files. Prudence will serve any file here directly to the
client, guessing the MIME type according to the file extension. Here, it behaves just like any other web server,
employing non-blocking data streaming, and will perform and scale very well, so you don't need to host your
static files on a "real" web server such as Apache.
</p>
<p>
Documents under /web are text files with support for embedded scriptlets, which you can use to
generate dynamic content. Prudence will guess the MIME type according to the file extension, though
you can set it in code. Note that Prudence will handle both HTTP GET and POST verbs for your documents, so that
you can you can handle HTML form submission (via GET or POST) right in your document.
</p>
<p>
Similarly to how resources work, the directory structure maps directly to the URL under the / root. Again, if an extension
is omitted from the URL, the first file with that name is picked up. By by convention, the "index" name is used for directories.
For example, index.html will be mapped for a directory URL. Note that index.txt would be mapped, too.
</p>
<p>
We say "HTML," but, in fact, these documents can be of any textual format. You can set the MIME type of each document inside of it by code.
The default is text/html.
</p>
<p>
Even without any coding, Prudence gives you a powerful feature here: documents can include other documents.
This can make it easier to design large sites with lots of shared HTML fragments.
</p>
<p>
A .script file with no scriptlets will be optimized and sent as-is
with no processing.
</p>

<h3>Advanced Topics</h3>

<h4>Generating Non-HTML Text</h4>

TODO

<h4>Non-Textual Representations</h4>

TODO

<h4>Routing</h4>

main.script

<h4>Logging</h4>

logging.conf

<h4>Running Prudence Behind Apache</h4>

mod_proxy

<h4>Installing Prudence As a Service/Daemon</h4>

YAJSW
service.conf
controller.log

<%& 'footer-fragment' %>
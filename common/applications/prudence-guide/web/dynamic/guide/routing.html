<%velocity #set($prudence.cacheDuration = 30000) %><%& '../fragments/header/' %>

<h2>Routing</h2>

<p>Prudence can actually run several servers at the same time, on multiple
IP addresses and ports, as well as handle several web sites via virtual hosting.</p>


<p>"Routing" in Prudence refers to how URLs are attached to resources. In
fact, this is often not a simple one-to-one relationship, and different
routes may be selected according to changing circumstances.</p>

<h3>Directories As Slugs</h3>

<p>Prudence provides straightforward, hierarchical, live routing between
your directory structure and URLs. Simply put, file paths are mapped directly
to URLs. Files added at runtime will automatically create new URLs for them.
To keep the URLs pretty, filename extensions are optional. The filename
extension, though serves two purposes:

In the case of code in /resources/, /libraries/ or other places, the extension
selects the language engine which will run the code. For example, "search.py"
will be run using Python, "search.gv" will be Groovy, "search.clj" will be
Clojure, etc.

In the case of files in /web/dynamic/ and /web/static/,
it helps select the default MIME type for representations. This selection
is based on the meta data service, which you can customize (see
<a href="../static-web/">static web</a>). Embedded language code in /web/dynamic/
files can also programatically change the returns MIME types (see <a
href="../resources/">resources</a>).
</p>

<div class="note">
<p>When Prudence URLs are attached to files in /web/dynamic/ and /resources/,
the filename extension is optional. Prudence simply grabs the
first file it finds with that name. So, generally, get used
to not have more than one file with the same name in the same directory,
even if they have different extensions.</p>
</div>

<p>Prudence routing rule: route by filename, format/language by extension</p>
</div>


<h3>default.*</h3>


<h3>routing.*</h3>



<h3>URI Templates</h3>


<h3>Virtual Hosts</h3>


<h3>Redirection</h3>

<p>
See <a href="http://www.restlet.org/documentation/2.0/jse/api/org/restlet/util/Resolver.html#createResolver(org.restlet.Request,%20org.restlet.Response)">this</a>.
</p>


<h3>Handling Errors</h3>


<pre>
// 404 handler
component.statusService.redirect(404, '{hi}/404.html', component.context);
</pre>


<%& '../fragments/footer/' %>
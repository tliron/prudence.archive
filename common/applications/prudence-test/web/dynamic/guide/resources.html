<%velocity #set($document.cacheDuration=5000) #set($prefix = '../') %><%& '../fragments/header' %>

<h2>Resources</h2>

<p>Resources as API.</p>

<p>There's no need to maintain a separate "internal API," with REST resources serving
as an "external API." Your resources are available internally, without having to use
HTTP. A single, uniform API is more maintainable, and less prone to bugs.
Additionally, the internal connectivity is an easy way to test your resources.
See below for internal access to your resources.</p>

<h3>Life</h3>


<h3>CRUD</h3>

<p>An example of handleGet in Python:</p>
<pre>
def handleGet():
    id = int(prudence.resource.request.attributes.get('id'))
   
    session = get_session()
    try:
        note = session.query(Note).filter_by(id=id).one()
    except NoResultFound:
        return 404
    finally:
        session.close()

    prudence.modificationTimestamp = note.timestamp

	if prudence.mediaTypeName == 'application/json':
        return json.write(note.to_dict())
    elif if prudence.mediaTypeName == 'application/xml':
        return dict_to_xml(note.to_dict())
    else:
    	return 415
</pre>

<h3>Implied Representation</h3>

<h3>Error Codes</h3>

<h3>Explicit Representation</h3>

<h3>Conditional HTTP</h3>

<p>getInfo(), modification dates and ETags</p>

<h3>Concurrency Concerns</h3>


<h3>Mixing Languages</h3>

<h3>Accessing Resources Internally</h3>

<p>Prudence has very easy-to-use REST client, and a rich API for creating
and manipulation data <a href="../representations/">representations</a>.
You can use it to access your own resources, as well as resources from
other applications in your Prudence installation. Examples:
</p>

<pre>
importClass(org.restlet.resource.ClientResource);

// A resource in our application
var r = new ClientResource('riap://application/hosts');
print(r.get().text);

// A resource from another application on our host
var id = 9;
var r = new ClientResource('riap://host/stickstick/note/' + id + '/');
var note = JSON.parse(String(r.get(MediaType.APPLICATION_JSON).text));
</pre>

<h3>Accessing External REST Services</h3>

<p>The client API mentioned above can also be used to access external
resources from anywhere on the web. Examples:
</p>

<pre>
importClass(org.restlet.resource.ClientResource);

// An external resource
var r = new ClientResource('http://threecrickets/prudence/data/rhino');
print(r.get().text);
</pre>

<p>Note that for the above to work, you need HTTP configured in your clients
file:</p>

<pre>
component.clients.add(Protocol.HTTP);
</pre>


<%& '../fragments/footer' %>